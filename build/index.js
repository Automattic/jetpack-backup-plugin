!function(){var e={197:function(e){e.exports=function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e},e.exports.default=e.exports,e.exports.__esModule=!0},900:function(e){function t(){return e.exports=t=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},e.exports.default=e.exports,e.exports.__esModule=!0,t.apply(this,arguments)}e.exports=t,e.exports.default=e.exports,e.exports.__esModule=!0},105:function(e,t){var n;
/*!
  Copyright (c) 2018 Jed Watson.
  Licensed under the MIT License (MIT), see
  http://jedwatson.github.io/classnames
*/!function(){"use strict";var a={}.hasOwnProperty;function c(){for(var e=[],t=0;t<arguments.length;t++){var n=arguments[t];if(n){var s=typeof n;if("string"===s||"number"===s)e.push(n);else if(Array.isArray(n)){if(n.length){var r=c.apply(null,n);r&&e.push(r)}}else if("object"===s)if(n.toString===Object.prototype.toString)for(var o in n)a.call(n,o)&&n[o]&&e.push(o);else e.push(n.toString())}}return e.join(" ")}e.exports?(c.default=c,e.exports=c):void 0===(n=function(){return c}.apply(t,[]))||(e.exports=n)}()},587:function(e,t,n){"use strict";var a=n(843);function c(){}function s(){}s.resetWarningCache=c,e.exports=function(){function e(e,t,n,c,s,r){if(r!==a){var o=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw o.name="Invariant Violation",o}}function t(){return e}e.isRequired=e;var n={array:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:s,resetWarningCache:c};return n.PropTypes=n,n}},268:function(e,t,n){e.exports=n(587)()},843:function(e){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},444:function(e){"use strict";e.exports="/images/backup-animation-1-8d65f9365c217c43eb01.svg"},476:function(e){"use strict";e.exports="/images/backup-animation-2-4d8da04fb34b29957030.svg"},406:function(e){"use strict";e.exports="/images/backup-animation-3-1c6df0c7bc8546e712d8.svg"},50:function(e){"use strict";e.exports="/images/cloud-35473ae2758e9f3e353d.svg"},410:function(e){"use strict";e.exports="/images/plugins-d0898bae4e79a6e05b9e.svg"},287:function(e){"use strict";e.exports="/images/posts-7a4c9e22d20abaac65d6.svg"},535:function(e){"use strict";e.exports="/images/themes-700cf8bdf1049fdbc94a.svg"},567:function(e){"use strict";e.exports="/images/uploads-7a7b15dfda25508a8d68.svg"},308:function(e){"use strict";e.exports="/images/connect-right-f27775ac15cf885713c2.png"}},t={};function n(a){var c=t[a];if(void 0!==c)return c.exports;var s=t[a]={exports:{}};return e[a](s,s.exports,n),s.exports}n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,{a:t}),t},n.d=function(e,t){for(var a in t)n.o(t,a)&&!n.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var a={};!function(){"use strict";n.r(a);var e=window.React,t=n.n(e),c=window.ReactDOM,s=n.n(c),r=window.wp.data,o=window.wp.element,i=window.wp.i18n,l=window.wp.apiFetch,p=n.n(l);function u(e,t={}){const n={};let a;var c;"undefined"!=typeof window&&(a=null===(c=window.Initial_State)||void 0===c?void 0:c.calypsoEnv);if(0===e.search("https://")){const t=new URL(e);e=`https://${t.host}${t.pathname}`,n.url=encodeURIComponent(e)}else n.source=encodeURIComponent(e);Object.keys(t).map((e=>{n[e]=encodeURIComponent(t[e])})),!Object.keys(n).includes("site")&&"undefined"!=typeof jetpack_redirects&&jetpack_redirects.hasOwnProperty("currentSiteRawUrl")&&(n.site=jetpack_redirects.currentSiteRawUrl),a&&(n.calypso_env=a);return"https://jetpack.com/redirect/?"+Object.keys(n).map((e=>e+"="+n[e])).join("&")}var d=n(900),m=n.n(d),h=n(197),g=n.n(h),k=n(268),v=n.n(k),f=n(105),b=n.n(f);const __=i.__;class j extends t().Component{render(){const{logoColor:n,showText:a,className:c,...s}=this.props,r=a?"0 0 118 32":"0 0 32 32";return t().createElement("svg",m()({xmlns:"http://www.w3.org/2000/svg",x:"0px",y:"0px",viewBox:r,className:b()("jetpack-logo",c),"aria-labelledby":"jetpack-logo-title"},s),t().createElement("title",{id:"jetpack-logo-title"},__("Jetpack Logo","jetpack")),t().createElement("path",{fill:n,d:"M16,0C7.2,0,0,7.2,0,16s7.2,16,16,16s16-7.2,16-16S24.8,0,16,0z M15,19H7l8-16V19z M17,29V13h8L17,29z"}),a&&t().createElement(e.Fragment,null,t().createElement("path",{d:"M41.3,26.6c-0.5-0.7-0.9-1.4-1.3-2.1c2.3-1.4,3-2.5,3-4.6V8h-3V6h6v13.4C46,22.8,45,24.8,41.3,26.6z"}),t().createElement("path",{d:"M65,18.4c0,1.1,0.8,1.3,1.4,1.3c0.5,0,2-0.2,2.6-0.4v2.1c-0.9,0.3-2.5,0.5-3.7,0.5c-1.5,0-3.2-0.5-3.2-3.1V12H60v-2h2.1V7.1 H65V10h4v2h-4V18.4z"}),t().createElement("path",{d:"M71,10h3v1.3c1.1-0.8,1.9-1.3,3.3-1.3c2.5,0,4.5,1.8,4.5,5.6s-2.2,6.3-5.8,6.3c-0.9,0-1.3-0.1-2-0.3V28h-3V10z M76.5,12.3 c-0.8,0-1.6,0.4-2.5,1.2v5.9c0.6,0.1,0.9,0.2,1.8,0.2c2,0,3.2-1.3,3.2-3.9C79,13.4,78.1,12.3,76.5,12.3z"}),t().createElement("path",{d:"M93,22h-3v-1.5c-0.9,0.7-1.9,1.5-3.5,1.5c-1.5,0-3.1-1.1-3.1-3.2c0-2.9,2.5-3.4,4.2-3.7l2.4-0.3v-0.3c0-1.5-0.5-2.3-2-2.3 c-0.7,0-2.3,0.5-3.7,1.1L84,11c1.2-0.4,3-1,4.4-1c2.7,0,4.6,1.4,4.6,4.7L93,22z M90,16.4l-2.2,0.4c-0.7,0.1-1.4,0.5-1.4,1.6 c0,0.9,0.5,1.4,1.3,1.4s1.5-0.5,2.3-1V16.4z"}),t().createElement("path",{d:"M104.5,21.3c-1.1,0.4-2.2,0.6-3.5,0.6c-4.2,0-5.9-2.4-5.9-5.9c0-3.7,2.3-6,6.1-6c1.4,0,2.3,0.2,3.2,0.5V13 c-0.8-0.3-2-0.6-3.2-0.6c-1.7,0-3.2,0.9-3.2,3.6c0,2.9,1.5,3.8,3.3,3.8c0.9,0,1.9-0.2,3.2-0.7V21.3z"}),t().createElement("path",{d:"M110,15.2c0.2-0.3,0.2-0.8,3.8-5.2h3.7l-4.6,5.7l5,6.3h-3.7l-4.2-5.8V22h-3V6h3V15.2z"}),t().createElement("path",{d:"M58.5,21.3c-1.5,0.5-2.7,0.6-4.2,0.6c-3.6,0-5.8-1.8-5.8-6c0-3.1,1.9-5.9,5.5-5.9s4.9,2.5,4.9,4.9c0,0.8,0,1.5-0.1,2h-7.3 c0.1,2.5,1.5,2.8,3.6,2.8c1.1,0,2.2-0.3,3.4-0.7C58.5,19,58.5,21.3,58.5,21.3z M56,15c0-1.4-0.5-2.9-2-2.9c-1.4,0-2.3,1.3-2.4,2.9 C51.6,15,56,15,56,15z"})))}}g()(j,"propTypes",{className:v().string,width:v().number,height:v().number,showText:v().bool,logoColor:v().string}),g()(j,"defaultProps",{className:"",height:32,showText:!0,logoColor:"#00BE28"});var E=j;const y=i.__,_=e=>{const{title:n,height:a,className:c,...s}=e;return t().createElement("svg",m()({role:"img",x:"0",y:"0",viewBox:"0 0 935 38.2",enableBackground:"new 0 0 935 38.2","aria-labelledby":"jp-automattic-byline-logo-title",height:a,className:b()("jp-automattic-byline-logo",c)},s),t().createElement("title",{id:"jp-automattic-byline-logo-title"},n),t().createElement("path",{d:"M317.1 38.2c-12.6 0-20.7-9.1-20.7-18.5v-1.2c0-9.6 8.2-18.5 20.7-18.5 12.6 0 20.8 8.9 20.8 18.5v1.2C337.9 29.1 329.7 38.2 317.1 38.2zM331.2 18.6c0-6.9-5-13-14.1-13s-14 6.1-14 13v0.9c0 6.9 5 13.1 14 13.1s14.1-6.2 14.1-13.1V18.6zM175 36.8l-4.7-8.8h-20.9l-4.5 8.8h-7L157 1.3h5.5L182 36.8H175zM159.7 8.2L152 23.1h15.7L159.7 8.2zM212.4 38.2c-12.7 0-18.7-6.9-18.7-16.2V1.3h6.6v20.9c0 6.6 4.3 10.5 12.5 10.5 8.4 0 11.9-3.9 11.9-10.5V1.3h6.7V22C231.4 30.8 225.8 38.2 212.4 38.2zM268.6 6.8v30h-6.7v-30h-15.5V1.3h37.7v5.5H268.6zM397.3 36.8V8.7l-1.8 3.1 -14.9 25h-3.3l-14.7-25 -1.8-3.1v28.1h-6.5V1.3h9.2l14 24.4 1.7 3 1.7-3 13.9-24.4h9.1v35.5H397.3zM454.4 36.8l-4.7-8.8h-20.9l-4.5 8.8h-7l19.2-35.5h5.5l19.5 35.5H454.4zM439.1 8.2l-7.7 14.9h15.7L439.1 8.2zM488.4 6.8v30h-6.7v-30h-15.5V1.3h37.7v5.5H488.4zM537.3 6.8v30h-6.7v-30h-15.5V1.3h37.7v5.5H537.3zM569.3 36.8V4.6c2.7 0 3.7-1.4 3.7-3.4h2.8v35.5L569.3 36.8 569.3 36.8zM628 11.3c-3.2-2.9-7.9-5.7-14.2-5.7 -9.5 0-14.8 6.5-14.8 13.3v0.7c0 6.7 5.4 13 15.3 13 5.9 0 10.8-2.8 13.9-5.7l4 4.2c-3.9 3.8-10.5 7.1-18.3 7.1 -13.4 0-21.6-8.7-21.6-18.3v-1.2c0-9.6 8.9-18.7 21.9-18.7 7.5 0 14.3 3.1 18 7.1L628 11.3zM321.5 12.4c1.2 0.8 1.5 2.4 0.8 3.6l-6.1 9.4c-0.8 1.2-2.4 1.6-3.6 0.8l0 0c-1.2-0.8-1.5-2.4-0.8-3.6l6.1-9.4C318.7 11.9 320.3 11.6 321.5 12.4L321.5 12.4z"}),t().createElement("path",{d:"M37.5 36.7l-4.7-8.9H11.7l-4.6 8.9H0L19.4 0.8H25l19.7 35.9H37.5zM22 7.8l-7.8 15.1h15.9L22 7.8zM82.8 36.7l-23.3-24 -2.3-2.5v26.6h-6.7v-36H57l22.6 24 2.3 2.6V0.8h6.7v35.9H82.8z"}),t().createElement("path",{d:"M719.9 37l-4.8-8.9H694l-4.6 8.9h-7.1l19.5-36h5.6l19.8 36H719.9zM704.4 8l-7.8 15.1h15.9L704.4 8zM733 37V1h6.8v36H733zM781 37c-1.8 0-2.6-2.5-2.9-5.8l-0.2-3.7c-0.2-3.6-1.7-5.1-8.4-5.1h-12.8V37H750V1h19.6c10.8 0 15.7 4.3 15.7 9.9 0 3.9-2 7.7-9 9 7 0.5 8.5 3.7 8.6 7.9l0.1 3c0.1 2.5 0.5 4.3 2.2 6.1V37H781zM778.5 11.8c0-2.6-2.1-5.1-7.9-5.1h-13.8v10.8h14.4c5 0 7.3-2.4 7.3-5.2V11.8zM794.8 37V1h6.8v30.4h28.2V37H794.8zM836.7 37V1h6.8v36H836.7zM886.2 37l-23.4-24.1 -2.3-2.5V37h-6.8V1h6.5l22.7 24.1 2.3 2.6V1h6.8v36H886.2zM902.3 37V1H935v5.6h-26v9.2h20v5.5h-20v10.1h26V37H902.3z"}))};_.defaultProps={title:y("An Automattic Airline","jetpack"),height:7,className:""},_.propTypes={title:v().string,height:v().number,className:v().string};var R=_;const S=i.__,N=e=>{const{a8cLogoHref:n,moduleName:a,className:c,...s}=e;return t().createElement("div",m()({className:b()("jp-dashboard-footer",c)},s),t().createElement("div",{className:"jp-dashboard-footer__footer-left"},t().createElement(E,{logoColor:"#000",showText:!1,height:16,className:"jp-dashboard-footer__jetpack-symbol","aria-label":S("Jetpack logo","jetpack")}),t().createElement("span",{className:"jp-dashboard-footer__module-name"},a)),t().createElement("div",{className:"jp-dashboard-footer__footer-right"},t().createElement("a",{href:n,"aria-label":S("An Automattic Airline","jetpack")},t().createElement(R,null))))};N.defaultProps={a8cLogoHref:"https://jetpack.com",moduleName:S("Jetpack","jetpack"),className:""},N.propTypes={a8cLogoHref:v().string,moduleName:v().string,className:v().string};var w=N,C=window.wp.date;const U="SET_CONNECTION_STATUS",O={setConnectionStatus:e=>({type:U,connectionStatus:e})};var P=(e={},t)=>t.type===U?t.connectionStatus:e;var $=(e={})=>e;var T=(e={})=>e;var M=(e={})=>e;const I=(0,r.combineReducers)({connectionStatus:P,API:$,jetpackStatus:T,assets:M});const L={...O};const A={...{getConnectionStatus:e=>e.connectionStatus||{}},...{getAPIRoot:e=>e.API.WP_API_root||null,getAPINonce:e=>e.API.WP_API_nonce||null,getRegistrationNonce:e=>e.API.registrationNonce||null},...{getCalypsoSlug:e=>e.jetpackStatus.calypsoSlug||{}},...{getAssetBuildUrl:e=>e.assets.buildUrl||null}};const x="jetpack-backup-plugin",z={reducer:I,actions:L,selectors:A,initialState:window.JPBACKUP_INITIAL_STATE||{}};var J=e=>React.createElement("div",{className:"backup__card"},React.createElement("img",{src:e.icon,alt:""}),React.createElement("div",{className:"backup__card-details"},React.createElement("div",{className:"backup__card-details-items"},e.label),React.createElement("div",{className:"backup__card-details-amount"},e.value))),V=n(287),B=n(50),D=n(567),H=n(410),F=n(535),q=n(444),W=n(476),Y=n(406);const G=i.__;var K=()=>{const[e,t]=(0,o.useState)(null),[n,a]=(0,o.useState)(0),[c,s]=(0,o.useState)(""),[i,l]=(0,o.useState)({posts:0,uploads:0,plugins:0,themes:0}),d=(0,r.useSelect)((e=>e(x).getCalypsoSlug()),[]),m=(0,r.useSelect)((e=>e(x).getAssetBuildUrl()),[]),h=0,g=1,k=2,v=3,f=4,[b,j]=(0,o.useState)(h);(0,o.useEffect)((()=>{p()({path:"/jetpack/v4/backups"}).then((e=>{let c=null;if(0===e.length)j(k);else{if(e.forEach((e=>{null===c&&"finished"===e.status&&e.stats&&(c=e,j(f))})),null===c&&"started"===e[0].status&&(c=e[0],t(c.percent),j(g)),!c)return void j(v);if("finished"===c.status){const e=c.stats.prefix+"posts";l({plugins:c.stats.plugins.count,themes:c.stats.themes.count,uploads:c.stats.uploads.count,posts:c.stats.tables[e].post_published}),s((0,C.date)("c",c.last_updated+"+00:00"))}}0!==e.length&&"started"!==c.status||setTimeout((()=>{a(n+1)}),1e3)}),(()=>{j(v)}))}),[n]);return React.createElement("div",{className:"jp-wrap"},h===b&&React.createElement("div",{class:"jp-row"}),k===b&&React.createElement("div",{class:"jp-row"},React.createElement("div",{class:"lg-col-span-5 md-col-span-4 sm-col-span-4"},React.createElement("h1",null,G("Welcome to Jetpack Backup!","jetpack-backup")),React.createElement("p",null,G("You're all set! Your first backup will start soon.","jetpack-backup"))),React.createElement("div",{class:"lg-col-span-1 md-col-span-4 sm-col-span-0"}),React.createElement("div",{class:"lg-col-span-6 md-col-span-2 sm-col-span-2"})),g===b&&React.createElement("div",{class:"jp-row"},React.createElement("div",{class:"lg-col-span-5 md-col-span-4 sm-col-span-4"},React.createElement("div",{class:"backup__progress"},React.createElement("div",{class:"backup__progress-info"},React.createElement("p",null,G("Backing up Your Groovy Site…","jetpack-backup")),React.createElement("p",{class:"backup__progress-info-percentage"},e,"%")),React.createElement("div",{class:"backup__progress-bar"},React.createElement("div",{class:"backup__progress-bar-actual",style:{width:e+"%"}}))),React.createElement("h1",null,G("Your first cloud backup will be ready soon","jetpack-backup")),React.createElement("p",null,G("The first backup usually takes a few minutes, so it will become available soon.","jetpack-backup")),React.createElement("p",null,(0,o.createInterpolateElement)(G("In the meanwhile, you can start getting familiar with your <a>backup management on Jetpack.com</a>.","jetpack-backup"),{a:React.createElement("a",{href:u("jetpack-backup",{site:d}),target:"_blank",rel:"noreferrer"})}))),React.createElement("div",{class:"lg-col-span-1 md-col-span-4 sm-col-span-0"}),React.createElement("div",{class:"backup__animation lg-col-span-6 md-col-span-2 sm-col-span-2"},React.createElement("img",{className:"backup__animation-el-1",src:m+q,alt:""}),React.createElement("img",{className:"backup__animation-el-2",src:m+W,alt:""}),React.createElement("img",{className:"backup__animation-el-3",src:m+Y,alt:""}))),f===b&&React.createElement("div",{className:"jp-row"},React.createElement("div",{className:"lg-col-span-3 md-col-span-4 sm-col-span-4"},React.createElement("div",{className:"backup__latest"},React.createElement("img",{src:m+B,alt:""}),React.createElement("h2",null,G("Latest Backup","jetpack-backup"))),React.createElement("h1",null,(e=>{const t=G("Today","jetpack-backup"),n=(0,C.getDate)();let a=t;return(0,C.dateI18n)("zY",n)!==(0,C.dateI18n)("zY",e)&&(a=(0,C.dateI18n)("M j",e)),a+", "+(0,C.dateI18n)("g:i A",e)})(c)),React.createElement("a",{class:"button is-full-width",href:u("jetpack-backup",{site:d}),target:"_blank",rel:"noreferrer"},G("See all your backups","jetpack-backup"))),React.createElement("div",{className:"lg-col-span-1 md-col-span-4 sm-col-span-0"}),React.createElement("div",{className:"lg-col-span-2 md-col-span-2 sm-col-span-2"},React.createElement(J,{icon:m+V,label:G("Posts","jetpack-backup"),value:i.posts})),React.createElement("div",{className:"lg-col-span-2 md-col-span-2 sm-col-span-2"},React.createElement(J,{icon:m+D,label:G("Uploads","jetpack-backup"),value:i.uploads})),React.createElement("div",{className:"lg-col-span-2 md-col-span-2 sm-col-span-2"},React.createElement(J,{icon:m+H,label:G("Plugins","jetpack-backup"),value:i.plugins})),React.createElement("div",{className:"lg-col-span-2 md-col-span-2 sm-col-span-2"},React.createElement(J,{icon:m+F,label:G("Themes","jetpack-backup"),value:i.themes}))),v===b&&React.createElement("div",{class:"jp-row"},React.createElement("div",{class:"lg-col-span-5 md-col-span-4 sm-col-span-4"},React.createElement("h1",null,G("We're having trouble backing up your site","jetpack-backup")),React.createElement("p",null,(0,o.createInterpolateElement)(G("Check that your Jetpack Connection is healthy with the <a>Jetpack Debugger</a>.","jetpack-backup"),{a:React.createElement("a",{href:u("backup-plugin-debug",{site:d}),target:"_blank",rel:"noreferrer"})})),React.createElement("p",null,(0,o.createInterpolateElement)(G("You can also find more information in your <a>backup management on Jetpack.com</a>.","jetpack-backup"),{a:React.createElement("a",{href:u("jetpack-backup",{site:d}),target:"_blank",rel:"noreferrer"})}))),React.createElement("div",{class:"lg-col-span-1 md-col-span-4 sm-col-span-0"}),React.createElement("div",{class:"lg-col-span-6 md-col-span-2 sm-col-span-2"})))},Q=window.lodash;function X(e){class t extends Error{constructor(...t){super(...t),this.name=e}}return t}const Z=X("JsonParseError"),ee=X("JsonParseAfterRedirectError"),te=X("Api404Error"),ne=X("Api404AfterRedirectError"),ae=X("FetchNetworkError");var ce=new function(e,t){let n=e,a={"X-WP-Nonce":t},c={credentials:"same-origin",headers:a},s={method:"post",credentials:"same-origin",headers:(0,Q.assign)({},a,{"Content-type":"application/json"})},r=function(e){const t=e.split("?"),n=t.length>1?t[1]:"",a=n.length?n.split("&"):[];return a.push("_cacheBuster="+(new Date).getTime()),t[0]+"?"+a.join("&")};const o={setApiRoot(e){n=e},setApiNonce(e){a={"X-WP-Nonce":e},c={credentials:"same-origin",headers:a},s={method:"post",credentials:"same-origin",headers:(0,Q.assign)({},a,{"Content-type":"application/json"})}},setCacheBusterCallback:e=>{r=e},registerSite:(e,t)=>{const a={registration_nonce:e,no_iframe:!0};return null!==t&&(a.redirect_uri=t),l(`${n}jetpack/v4/connection/register`,s,{body:JSON.stringify(a)}).then(se).then(re)},fetchAuthorizationUrl:e=>i(`${n}jetpack/v4/connection/authorize_url?no_iframe=1&redirect_uri=${encodeURIComponent(e)}`,c).then(se).then(re),fetchSiteConnectionData:()=>i(`${n}jetpack/v4/connection/data`,c).then(re),fetchSiteConnectionStatus:()=>i(`${n}jetpack/v4/connection`,c).then(re),fetchSiteConnectionTest:()=>i(`${n}jetpack/v4/connection/test`,c).then(se).then(re),fetchUserConnectionData:()=>i(`${n}jetpack/v4/connection/data`,c).then(re),fetchUserTrackingSettings:()=>i(`${n}jetpack/v4/tracking/settings`,c).then(se).then(re),updateUserTrackingSettings:e=>l(`${n}jetpack/v4/tracking/settings`,s,{body:JSON.stringify(e)}).then(se).then(re),disconnectSite:()=>l(`${n}jetpack/v4/connection`,s,{body:JSON.stringify({isActive:!1})}).then(se).then(re),fetchConnectUrl:()=>i(`${n}jetpack/v4/connection/url`,c).then(se).then(re),unlinkUser:()=>l(`${n}jetpack/v4/connection/user`,s,{body:JSON.stringify({linked:!1})}).then(se).then(re),reconnect:()=>l(`${n}jetpack/v4/connection/reconnect`,s).then(se).then(re),fetchConnectedPlugins:()=>i(`${n}jetpack/v4/connection/plugins`,c).then(se).then(re),fetchModules:()=>i(`${n}jetpack/v4/module/all`,c).then(se).then(re),fetchModule:e=>i(`${n}jetpack/v4/module/${e}`,c).then(se).then(re),activateModule:e=>l(`${n}jetpack/v4/module/${e}/active`,s,{body:JSON.stringify({active:!0})}).then(se).then(re),deactivateModule:e=>l(`${n}jetpack/v4/module/${e}/active`,s,{body:JSON.stringify({active:!1})}),updateModuleOptions:(e,t)=>l(`${n}jetpack/v4/module/${e}`,s,{body:JSON.stringify(t)}).then(se).then(re),updateSettings:e=>l(`${n}jetpack/v4/settings`,s,{body:JSON.stringify(e)}).then(se).then(re),getProtectCount:()=>i(`${n}jetpack/v4/module/protect/data`,c).then(se).then(re),resetOptions:e=>l(`${n}jetpack/v4/options/${e}`,s,{body:JSON.stringify({reset:!0})}).then(se).then(re),activateVaultPress:()=>l(`${n}jetpack/v4/plugins`,s,{body:JSON.stringify({slug:"vaultpress",status:"active"})}).then(se).then(re),getVaultPressData:()=>i(`${n}jetpack/v4/module/vaultpress/data`,c).then(se).then(re),installPlugin:(e,t)=>{const a={slug:e,status:"active"};return t&&(a.source=t),l(`${n}jetpack/v4/plugins`,s,{body:JSON.stringify(a)}).then(se).then(re)},activateAkismet:()=>l(`${n}jetpack/v4/plugins`,s,{body:JSON.stringify({slug:"akismet",status:"active"})}).then(se).then(re),getAkismetData:()=>i(`${n}jetpack/v4/module/akismet/data`,c).then(se).then(re),checkAkismetKey:()=>i(`${n}jetpack/v4/module/akismet/key/check`,c).then(se).then(re),checkAkismetKeyTyped:e=>l(`${n}jetpack/v4/module/akismet/key/check`,s,{body:JSON.stringify({api_key:e})}).then(se).then(re),fetchStatsData:e=>i(function(e){let t=`${n}jetpack/v4/module/stats/data`;-1!==t.indexOf("?")?t+=`&range=${encodeURIComponent(e)}`:t+=`?range=${encodeURIComponent(e)}`;return t}(e),c).then(se).then(re).then(p),getPluginUpdates:()=>i(`${n}jetpack/v4/updates/plugins`,c).then(se).then(re),getPlans:()=>i(`${n}jetpack/v4/plans`,c).then(se).then(re),fetchSettings:()=>i(`${n}jetpack/v4/settings`,c).then(se).then(re),updateSetting:e=>l(`${n}jetpack/v4/settings`,s,{body:JSON.stringify(e)}).then(se).then(re),fetchSiteData:()=>i(`${n}jetpack/v4/site`,c).then(se).then(re).then((e=>JSON.parse(e.data))),fetchSiteFeatures:()=>i(`${n}jetpack/v4/site/features`,c).then(se).then(re).then((e=>JSON.parse(e.data))),fetchSiteProducts:()=>i(`${n}jetpack/v4/site/products`,c).then(se).then(re),fetchSitePurchases:()=>i(`${n}jetpack/v4/site/purchases`,c).then(se).then(re).then((e=>JSON.parse(e.data))),fetchSiteBenefits:()=>i(`${n}jetpack/v4/site/benefits`,c).then(se).then(re).then((e=>JSON.parse(e.data))),fetchSetupQuestionnaire:()=>i(`${n}jetpack/v4/setup/questionnaire`,c).then(se).then(re),fetchRecommendationsData:()=>i(`${n}jetpack/v4/recommendations/data`,c).then(se).then(re),fetchRecommendationsProductSuggestions:()=>i(`${n}jetpack/v4/recommendations/product-suggestions`,c).then(se).then(re),fetchRecommendationsUpsell:()=>i(`${n}jetpack/v4/recommendations/upsell`,c).then(se).then(re),saveRecommendationsData:e=>l(`${n}jetpack/v4/recommendations/data`,s,{body:JSON.stringify({data:e})}).then(se),fetchProducts:()=>i(`${n}jetpack/v4/products`,c).then(se).then(re),fetchRewindStatus:()=>i(`${n}jetpack/v4/rewind`,c).then(se).then(re).then((e=>JSON.parse(e.data))),fetchScanStatus:()=>i(`${n}jetpack/v4/scan`,c).then(se).then(re).then((e=>JSON.parse(e.data))),dismissJetpackNotice:e=>l(`${n}jetpack/v4/notice/${e}`,s,{body:JSON.stringify({dismissed:!0})}).then(se).then(re),fetchPluginsData:()=>i(`${n}jetpack/v4/plugins`,c).then(se).then(re),fetchVerifySiteGoogleStatus:e=>i(null!==e?`${n}jetpack/v4/verify-site/google/${e}`:`${n}jetpack/v4/verify-site/google`,c).then(se).then(re),verifySiteGoogle:e=>l(`${n}jetpack/v4/verify-site/google`,s,{body:JSON.stringify({keyring_id:e})}).then(se).then(re),sendMobileLoginEmail:()=>l(`${n}jetpack/v4/mobile/send-login-email`,s).then(se).then(re),submitSurvey:e=>l(`${n}jetpack/v4/marketing/survey`,s,{body:JSON.stringify(e)}).then(se).then(re),saveSetupQuestionnaire:e=>l(`${n}jetpack/v4/setup/questionnaire`,s,{body:JSON.stringify(e)}).then(se).then(re),updateLicensingError:e=>l(`${n}jetpack/v4/licensing/error`,s,{body:JSON.stringify(e)}).then(se).then(re),updateLicenseKey:e=>l(`${n}jetpack/v4/licensing/set-license`,s,{body:JSON.stringify({license:e})}).then(se).then(re),updateRecommendationsStep:e=>l(`${n}jetpack/v4/recommendations/step`,s,{body:JSON.stringify({step:e})}).then(se),confirmIDCSafeMode:()=>l(`${n}jetpack/v4/identity-crisis/confirm-safe-mode`,s).then(se),startIDCFresh:e=>l(`${n}jetpack/v4/identity-crisis/start-fresh`,s,{body:JSON.stringify({redirect_uri:e})}).then(se).then(re),migrateIDC:()=>l(`${n}jetpack/v4/identity-crisis/migrate`,s).then(se)};function i(e,t){return fetch(r(e),t)}function l(e,t,n){return fetch(e,(0,Q.assign)({},t,n)).catch(ie)}function p(e){return e.general&&void 0===e.general.response||e.week&&void 0===e.week.response||e.month&&void 0===e.month.response?e:{}}(0,Q.assign)(this,o)};function se(e){return e.status>=200&&e.status<300?e:404===e.status?new Promise((()=>{throw e.redirected?new ne(e.redirected):new te})):e.json().catch((e=>oe(e))).then((t=>{const n=new Error(`${t.message} (Status ${e.status})`);throw n.response=t,n.name="ApiError",n}))}function re(e){return e.json().catch((t=>oe(t,e.redirected,e.url)))}function oe(e,t,n){throw t?new ee(n):new Z}function ie(){throw new ae}const le="SET_CONNECTION_STATUS",pe="SET_CONNECTION_STATUS_IS_FETCHING",ue={setConnectionStatus:e=>({type:le,connectionStatus:e}),setConnectionStatusIsFetching:e=>({type:pe,isFetching:e})};var de=(0,r.combineReducers)({connectionStatus:(e={},t)=>t.type===le?{...e,...t.connectionStatus}:e,connectionStatusIsFetching:(e=!1,t)=>t.type===pe?t.isFetching:e});var me={...ue};var he={...{getConnectionStatus:e=>e.connectionStatus||{},getConnectionStatusIsFetching:e=>e.connectionStatusIsFetching||!1}};class ge{static mayBeInit(e,t){null===ge.store&&(ge.store=(0,r.createReduxStore)(e,t),(0,r.register)(ge.store))}}g()(ge,"store",null);const ke="jetpack-connection";ge.mayBeInit(ke,{reducer:de,actions:me,selectors:he});var ve=n=>a=>{const{apiRoot:c,apiNonce:s,statusCallback:o}=a,i=(0,r.useSelect)((e=>e(ke).getConnectionStatus()),[]),{setConnectionStatus:l,setConnectionStatusIsFetching:p}=(0,r.useDispatch)(ke),u=(0,r.useSelect)((e=>e(ke).getConnectionStatusIsFetching()),[]),d=i.hasOwnProperty("isActive"),h=(0,e.useCallback)((e=>{l(e),p(!1)}),[l,p]),g=(0,e.useCallback)((e=>{throw p(!1),e}),[p]),k=(0,e.useCallback)((()=>{if(o&&"[object Function]"==={}.toString.call(o))return o(i)}),[i,o]);return d||u||(p(!0),((e,t,n,a)=>{ce.setApiRoot(e),ce.setApiNonce(t),ce.fetchSiteConnectionStatus().then(n).catch(a)})(c,s,h,g)),d&&!u&&k(),t().createElement(n,m()({connectionStatus:i,connectionStatusIsFetching:u},a))},fe=window.wp.components;const be=e=>{const n=e.className+" jp-components-spinner",a={width:e.size,height:e.size,fontSize:e.size};return t().createElement("div",{className:n},t().createElement("div",{className:"jp-components-spinner__outer",style:a},t().createElement("div",{className:"jp-components-spinner__inner"})))};be.propTypes={className:v().string,size:v().number},be.defaultProps={size:20,className:""};var je=be;const Ee=i.__,ye=e=>{const{label:n,onClick:a,isLoading:c,displayError:s,errorMessage:r}=e;return t().createElement("div",{className:"jp-action-button"},t().createElement(fe.Button,{className:"jp-action-button--button",label:n,onClick:a,isPrimary:!0,disabled:c},c?t().createElement(je,null):n),s&&t().createElement("p",{className:"jp-action-button__error"},r))};ye.propTypes={label:v().string.isRequired,onClick:v().func,isLoading:v().bool,displayError:v().bool,errorMessage:v().string},ye.defaultProps={isLoading:!1,displayError:!1,errorMessage:Ee("An error occurred. Please try again.","jetpack")};var _e=ye;const Re=t=>{const{redirectFunc:n,connectUrl:a,redirectUri:c,from:s}=t,[r,o]=(0,e.useState)(null);return a&&a!==r&&o(a),(0,e.useEffect)((()=>{r||ce.fetchAuthorizationUrl(c).then((e=>o(e.authorizeUrl))).catch((e=>{throw e}))}),[]),r?(n(r+(s?(r.includes("?")?"&":"?")+"from="+encodeURIComponent(s):"")),null):null};Re.propTypes={connectUrl:v().string,redirectUri:v().string.isRequired,from:v().string,redirectFunc:v().func},Re.defaultProps={redirectFunc:e=>window.location.assign(e),redirectUri:null};var Se=Re;const Ne=i.__,we=n=>{const[a,c]=(0,e.useState)(!1),[s,r]=(0,e.useState)(!1),[o,i]=(0,e.useState)(!1),[l,p]=(0,e.useState)(null),{apiRoot:u,apiNonce:d,connectLabel:m,onRegistered:h,registrationNonce:g,redirectUri:k,from:v,connectionStatus:f,connectionStatusIsFetching:b,autoTrigger:j}=n;(0,e.useEffect)((()=>{ce.setApiRoot(u),ce.setApiNonce(d)}),[u,d]);const E=(0,e.useCallback)((e=>{e&&e.preventDefault(),i(!1),f.isRegistered?r(!0):(c(!0),ce.registerSite(g,k).then((e=>{c(!1),h&&h(e),p(e.authorizeUrl),r(!0)})).catch((e=>{throw c(!1),i(e),e})))}),[c,p,f,h,g,k]);return(0,e.useEffect)((()=>{!j||a||s||E()}),[]),t().createElement(t().Fragment,null,b&&"Loading...",(!f.isRegistered||!f.isUserConnected)&&!b&&t().createElement(_e,{label:m,onClick:E,displayError:!!o,isLoading:a||s}),s&&t().createElement(Se,{connectUrl:l,redirectUri:k,from:v}))};we.propTypes={connectLabel:v().string,apiRoot:v().string.isRequired,apiNonce:v().string.isRequired,onRegistered:v().func,from:v().string,redirectUri:v().string.isRequired,registrationNonce:v().string.isRequired,autoTrigger:v().bool},we.defaultProps={connectLabel:Ne("Connect","jetpack"),redirectUri:null,autoTrigger:!1};var Ce=we;const Ue=e=>{const{images:n,assetBaseUrl:a}=e;if(!n.length)return null;const c=n.map(((e,n)=>t().createElement(t().Fragment,{key:n},t().createElement("img",{src:a+e,alt:""}))));return t().createElement("div",{className:"jp-connection__connect-screen__image-slider"},c)};Ue.propTypes={images:v().arrayOf(v().string).isRequired,assetBaseUrl:v().string},Ue.defaultProps={assetBaseUrl:""};var Oe=Ue;const Pe=e=>{const{title:n,children:a,className:c,assetBaseUrl:s,images:r}=e,o=null==r?void 0:r.length;return t().createElement("div",{className:"jp-connection__connect-screen-layout"+(o?" jp-connection__connect-screen-layout__two-columns":"")+(c?" "+c:"")},t().createElement("div",{className:"jp-connection__connect-screen-layout__left"},t().createElement(E,null),t().createElement("h2",null,n),a),o?t().createElement("div",{className:"jp-connection__connect-screen-layout__right"},t().createElement(Oe,{images:r,assetBaseUrl:s})):null,t().createElement("div",{className:"jp-connection__connect-screen-layout__clearfix"}))};Pe.propTypes={title:v().string,className:v().string,images:v().arrayOf(v().string),assetBaseUrl:v().string};var $e=Pe;const Te=i.__,Me=e=>{const{title:n,buttonLabel:a,images:c,children:s,assetBaseUrl:r,autoTrigger:i,connectionStatus:l,renderConnectBtn:p}=e,d=(0,o.createInterpolateElement)(Te("By clicking the button above, you agree to our <tosLink>Terms of Service</tosLink> and to <shareDetailsLink>share details</shareDetailsLink> with WordPress.com.","jetpack"),{tosLink:t().createElement("a",{href:u("wpcom-tos"),rel:"noopener noreferrer",target:"_blank"}),shareDetailsLink:t().createElement("a",{href:u("jetpack-support-what-data-does-jetpack-sync"),rel:"noopener noreferrer",target:"_blank"})});return t().createElement($e,{title:n,assetBaseUrl:r,images:c,className:"jp-connection__connect-screen"+(l.hasOwnProperty("isRegistered")?"":" jp-connection__connect-screen__loading")},t().createElement("div",{className:"jp-connection__connect-screen__content"},s,p(a,i),t().createElement("div",{className:"jp-connection__connect-screen__tos"},d)))};Me.propTypes={title:v().string,buttonLabel:v().string,connectionStatus:v().object.isRequired,autoTrigger:v().bool,renderConnectBtn:v().func.isRequired},Me.defaultProps={autoTrigger:!1};var Ie=Me;const Le=i.__,Ae=n=>{const{title:a,buttonLabel:c,apiRoot:s,apiNonce:r,registrationNonce:o,from:i,redirectUri:l,images:p,children:u,assetBaseUrl:d,autoTrigger:m,connectionStatus:h}=n,g=(0,e.useCallback)(((e,n)=>t().createElement(Ce,{autoTrigger:n,apiRoot:s,apiNonce:r,registrationNonce:o,from:i,redirectUri:l,connectionStatus:h,connectLabel:e})),[s,r,o,i,l,h]);return t().createElement(Ie,{title:a,autoTrigger:m,buttonLabel:c,images:p,assetBaseUrl:d,connectionStatus:h,renderConnectBtn:g},u)};Ae.propTypes={title:v().string,buttonLabel:v().string,apiRoot:v().string.isRequired,apiNonce:v().string.isRequired,registrationNonce:v().string.isRequired,from:v().string,redirectUri:v().string.isRequired,connectionStatus:v().object.isRequired,autoTrigger:v().bool,images:v().arrayOf(v().string),assetBaseUrl:v().string},Ae.defaultProps={title:Le("Over 5 million WordPress sites are faster and more secure","jetpack"),buttonLabel:Le("Set up Jetpack","jetpack"),images:[],redirectUri:null,autoTrigger:!1};var xe=Ae;const ze=i.__,Je=n=>{const[a,c]=(0,e.useState)(!1),[s,r]=(0,e.useState)(!1),[i,l]=(0,e.useState)(!1),[p,d]=(0,e.useState)(!1),{apiRoot:m,apiNonce:h,title:g,onDisconnected:k,onError:v,errorMessage:f,children:b}=n;(0,e.useEffect)((()=>{ce.setApiRoot(m),ce.setApiNonce(h)}),[m,h]);const j=(0,e.useCallback)((e=>{e&&e.preventDefault(),c(!0)}),[c]),y=(0,e.useCallback)((e=>{e&&e.preventDefault(),c(!1)}),[c]),_=(0,e.useCallback)((e=>{e&&e.preventDefault(),d(!1),r(!0),ce.disconnectSite().then((()=>{r(!1),l(!0)})).catch((e=>{r(!1),d(e),v&&v(e)}))}),[r,l,d,v]),R=(0,e.useCallback)((e=>{e&&e.preventDefault(),k&&k(),y()}),[k,y]);return t().createElement(t().Fragment,null,t().createElement(fe.Button,{variant:"link",onClick:j,className:"jp-disconnect-dialog__link"},ze("Disconnect","jetpack")),a&&t().createElement(fe.Modal,{title:"",contentLabel:g,aria:{labelledby:"jp-disconnect-dialog__heading"},onRequestClose:y,shouldCloseOnClickOutside:!1,shouldCloseOnEsc:!1,isDismissible:!1,className:"jp-disconnect-dialog"+(i?" jp-disconnect-dialog__success":"")},!i&&t().createElement("div",null,t().createElement("div",{className:"jp-disconnect-dialog__content"},t().createElement("h1",{id:"jp-disconnect-dialog__heading"},g),b),t().createElement("div",{className:"jp-disconnect-dialog__actions"},t().createElement("div",{className:"jp-row"},t().createElement("div",{className:"lg-col-span-8 md-col-span-8 sm-col-span-4"},t().createElement("p",null,(0,o.createInterpolateElement)(ze("<strong>Need help?</strong> Learn more about the <jpConnectionInfoLink>Jetpack connection</jpConnectionInfoLink> or <jpSupportLink>contact Jetpack support</jpSupportLink>","jetpack"),{strong:t().createElement("strong",null),jpConnectionInfoLink:t().createElement("a",{href:u("why-the-wordpress-com-connection-is-important-for-jetpack"),rel:"noopener noreferrer",target:"_blank",className:"jp-disconnect-dialog__link"}),jpSupportLink:t().createElement("a",{href:u("jetpack-support"),rel:"noopener noreferrer",target:"_blank",className:"jp-disconnect-dialog__link"})}))),t().createElement("div",{className:"jp-disconnect-dialog__button-wrap lg-col-span-4 md-col-span-8 sm-col-span-4"},t().createElement(fe.Button,{isPrimary:!0,disabled:s,onClick:y,className:"jp-disconnect-dialog__btn-dismiss"},ze("Stay connected","jetpack")),t().createElement(fe.Button,{isPrimary:!0,disabled:s,onClick:_,className:"jp-disconnect-dialog__btn-disconnect"},ze("Disconnect","jetpack")))),p&&t().createElement("p",{className:"jp-disconnect-dialog__error"},f))),i&&t().createElement("div",null,t().createElement(E,null),t().createElement("h1",null,(0,o.createInterpolateElement)(ze("Jetpack has been <br/>successfully disconnected.","jetpack"),{br:t().createElement("br",null)})),t().createElement(fe.Button,{isPrimary:!0,onClick:R,className:"jp-disconnect-dialog__btn-back-to-wp"},ze("Back to WordPress","jetpack")))))};Je.propTypes={apiRoot:v().string.isRequired,apiNonce:v().string.isRequired,title:v().string,onDisconnected:v().func,onError:v().func,errorMessage:v().string},Je.defaultProps={title:ze("Are you sure you want to disconnect?","jetpack"),errorMessage:ze("Failed to disconnect. Please try again.","jetpack")};var Ve=Je;const Be=i.__,De=n=>{const{apiRoot:a,apiNonce:c,isRegistered:s,isUserConnected:o,redirectUri:i,title:l,connectionInfoText:p,onDisconnected:u}=n,[d,m]=(0,e.useState)(!1),[h,g]=(0,e.useState)({}),[k,v]=(0,e.useState)(!1),{setConnectionStatus:f}=(0,r.useDispatch)(ke),b=(0,e.useRef)();(0,e.useEffect)((()=>{ce.setApiRoot(a),ce.setApiNonce(c)}),[a,c]),(0,e.useEffect)((()=>{m(!0),ce.fetchSiteConnectionData().then((e=>{var t,n,a;m(!1),g(null===(t=e.currentUser)||void 0===t?void 0:t.wpcomUser);const c=null===(n=e.currentUser)||void 0===n||null===(a=n.wpcomUser)||void 0===a?void 0:a.avatar;c&&(b.current.style.backgroundImage=`url('${c}')`)})).catch((e=>{throw m(!1),e}))}),[m,g]);const j=(0,e.useCallback)((e=>{e&&e.preventDefault(),f({isActive:!1,isRegistered:!1,isUserConnected:!1}),u&&"[object Function]"==={}.toString.call(u)&&u()}),[u,f]);return s?t().createElement("div",{className:"jp-connection-status-card"},t().createElement("h3",null,l),t().createElement("p",null,p),t().createElement("div",{className:"jp-connection-status-card--status"},t().createElement("div",{className:"jp-connection-status-card--cloud"}),t().createElement("div",{className:"jp-connection-status-card--line"+(o?"":" jp-connection-status-card--site-only")}),t().createElement("div",{className:"jp-connection-status-card--jetpack-logo"}),t().createElement("div",{className:"jp-connection-status-card--avatar",ref:b})),t().createElement("ul",{className:"jp-connection-status-card--list"},t().createElement("li",{className:"jp-connection-status-card--list-item-success"},Be("Site connected.","jetpack")," ",t().createElement(Ve,{apiRoot:a,apiNonce:c,onDisconnected:j},t().createElement("h2",null,Be("Jetpack is currently powering multiple products on your site.","jetpack"),t().createElement("br",null),Be("Once you disconnect Jetpack, these will no longer work.","jetpack")))),o&&!d&&t().createElement("li",{className:"jp-connection-status-card--list-item-success"},Be("Logged in as","jetpack")," ",null==h?void 0:h.display_name),!o&&!d&&t().createElement("li",{className:"jp-connection-status-card--list-item-error"},Be("Your WordPress.com account is not connected.","jetpack"))),!o&&!d&&t().createElement(fe.Button,{isPrimary:!0,disabled:k,onClick:v,className:"jp-connection-status-card--btn-connect-user"},Be("Connect your WordPress.com account","jetpack")),k&&t().createElement(Se,{redirectUri:i})):null};De.propTypes={apiRoot:v().string.isRequired,apiNonce:v().string.isRequired,isRegistered:v().bool.isRequired,isUserConnected:v().bool.isRequired,redirectUri:v().string.isRequired,title:v().string,connectionInfoText:v().string,onDisconnected:v().func},De.defaultProps={title:Be("Connection","jetpack"),connectionInfoText:Be("Leverages the Jetpack Cloud for more features on your side.","jetpack")};var He=De,Fe=n(308);const qe=i.__,We=ve(xe);const Ye=i.__;var Ge=()=>{const[n,a,c]=function(){const n=(0,r.useSelect)((e=>e(x).getAPINonce()),[]),a=(0,r.useSelect)((e=>e(x).getAPIRoot()),[]),c=(0,r.useSelect)((e=>e(x).getRegistrationNonce()),[]),s=(0,r.useSelect)((e=>e(x).getAssetBuildUrl()),[]),o=(0,r.useSelect)((e=>e(x).getConnectionStatus()),[]),{setConnectionStatus:i}=(0,r.useDispatch)(x),l=(0,e.useCallback)((e=>{i(e)}),[i]),p=(0,e.useCallback)((()=>{i({isActive:!1,isRegistered:!1,isUserConnected:!1})}),[i]);return[o,()=>t().createElement(We,{apiRoot:a,apiNonce:n,registrationNonce:c,from:"jetpack-backup",redirectUri:"admin.php?page=jetpack-backup",statusCallback:l,images:[Fe],assetBaseUrl:s},t().createElement("p",null,qe("Jetpack Backup requires a user connection to WordPress.com to be able to backup your website.","jetpack-backup"))),()=>t().createElement(He,{isRegistered:o.isRegistered,isUserConnected:o.isUserConnected,apiRoot:a,apiNonce:n,onDisconnected:p,redirectUri:"admin.php?page=jetpack-backup"})]}(),[s,i]=(0,o.useState)([]),[l,d]=(0,o.useState)(null),[m,h]=(0,o.useState)(!1),[g,k]=(0,o.useState)(!1),[v,f]=(0,o.useState)(!0),b=(0,r.useSelect)((e=>e(x).getCalypsoSlug()),[]);(0,o.useEffect)((()=>{0<Object.keys(n).length&&h(!0)}),[n]),(0,o.useEffect)((()=>{p()({path:"jetpack/v4/backup-capabilities"}).then((e=>{i(e.capabilities),k(!0)}),(()=>{k(!0),d("Failed to fetch site capabilities")}))}),[]);const j=()=>s.includes("backup"),y=()=>m&&n.isUserConnected&&n.isRegistered?(v||f(!0),g?j()?React.createElement(K,null):l?React.createElement("div",null,l):React.createElement("div",{className:"jp-wrap"},React.createElement("div",{className:"jp-row"},React.createElement("div",{class:"lg-col-span-8 md-col-span-8 sm-col-span-4"},React.createElement("h1",null,Ye("Your site does not have backups","jetpack-backup")),React.createElement("p",null,Ye("Get peace of mind knowing your work will be saved, add backups today.","jetpack-backup"),React.createElement("br",null),Ye("Choose from real time or daily backups.","jetpack-backup")),React.createElement("a",{class:"button",href:u("backup-plugin-upgrade",{site:b}),target:"_blank",rel:"noreferrer"},Ye("Upgrade now","jetpack-backup"))),React.createElement("div",{class:"lg-col-span-4 md-col-span-0 sm-col-span-0"}))):React.createElement("div",null)):(v&&f(!1),React.createElement("div",{className:"jp-wrap"},React.createElement("div",{className:"jp-row"},React.createElement("div",{class:"lg-col-span-12 md-col-span-8 sm-col-span-4"},a()))));return React.createElement("div",{id:"jetpack-backup-admin-container",className:"jp-content"},(()=>{if(v)return React.createElement("div",{className:"jp-wrap"},React.createElement("div",{className:"jp-row"},React.createElement("div",{class:"lg-col-span-12 md-col-span-8 sm-col-span-4"},React.createElement("div",{className:"jp-masthead"},React.createElement("div",{className:"jp-masthead__inside-container"},React.createElement("div",{className:"jp-masthead__logo-container"},React.createElement(E,{className:"jetpack-logo__masthead"})))))))})(),React.createElement("div",{className:"content"},React.createElement("div",{className:"jp-hero"},y()),React.createElement("div",{className:"jp-section"},React.createElement("div",{className:"jp-wrap"},m&&n.isUserConnected&&n.isRegistered&&React.createElement("div",{className:"jp-row"},React.createElement("div",{class:"lg-col-span-6 md-col-span-4 sm-col-span-4"},React.createElement("h2",null,Ye("Where are my backups stored?","jetpack-backup")),React.createElement("p",null,Ye("All the backups are safely stored in the cloud and available for you at any time on Jetpack.com, with full details about status and content.","jetpack-backup")),j()&&!s.includes("backup-realtime")&&React.createElement("a",{class:"jp-cut",href:u("backup-plugin-realtime-upgrade",{site:b})},React.createElement("span",null,Ye("Your site is updated with new content several times a day","jetpack-backup")),React.createElement("span",null,Ye("Consider upgrading to real-time protection","jetpack-backup")))),React.createElement("div",{class:"lg-col-span-1 md-col-span-1 sm-col-span-0"}),React.createElement("div",{class:"lg-col-span-5 md-col-span-3 sm-col-span-4"},React.createElement("h2",null,Ye("Your site's heartbeat","jetpack-backup")),React.createElement("p",null,Ye("The activity log lets you see everything that’s going on with your site outlined in an organized, readable way.","jetpack-backup")),j()&&React.createElement("p",null,React.createElement("a",{href:u("backup-plugin-activity-log",{site:b}),target:"_blank",rel:"noreferrer"},Ye("See your site's activity","jetpack-backup"))),c()))))),(()=>{if(v)return React.createElement("div",{className:"jp-wrap"},React.createElement("div",{className:"jp-row"},React.createElement("div",{class:"lg-col-span-12 md-col-span-8 sm-col-span-4"},React.createElement(w,{moduleName:Ye("Jetpack Backup","jetpack-backup"),a8cLogoHref:"https://www.jetpack.com"}))))})())};const Ke=(0,r.createReduxStore)(x,z);(0,r.register)(Ke),function(){const e=document.getElementById("jetpack-backup-root");null!==e&&s().render(t().createElement(Ge,null),e)}()}();var c=window;for(var s in a)c[s]=a[s];a.__esModule&&Object.defineProperty(c,"__esModule",{value:!0})}();